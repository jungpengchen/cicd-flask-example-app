name: CICD process 
on:
  push:
    branches:
      - main
      - prod
jobs:
  init_var:
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        env:
          CONDUIT_SECRET: ${{ secrets.SECRET_DESKTOP }}
        run:
          echo "SECRET:"$CONDUIT_SECRET
  build:
    needs: init_var
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run:
          echo "build production image as base image"
          echo "build dev image from base image"
  test:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run:
          echo "run container over the dev image with test command"
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        name: push image
        run:
          echo "push image to harbor"
      - shell: bash
        name: deploy app
        run:
          echo "deploy to dev/prod environment"
  init_monitor:
    needs: deploy
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run:
          echo "setup metrics and alert"

  